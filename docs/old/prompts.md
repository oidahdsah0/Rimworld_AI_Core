在Core项目的docs文件夹下，有一个TODO开头的文件，这个文件是我下一步的设计。你需要根据文件内容和里面的施工提示词进行施工，对旧有的、不合理的Tool相关设计和服务进行升级改造，清理无用的冗余的代码（仅限Tool部分）。

目前第一阶段需要你认真读取docs下的6个主要的md文档，说出你的实施计划，在我授权后你才可开工。

=====

别着急呀，事情还没办完呢！

下面，是历史记录服务。

所有的对话，都由历史记录服务所管理。

历史记录分为2种：1v1和NvN。

其中1v1可以是玩家对NPC，也可以是NPC对NPC。

NvN则是多对多。

这些历史记录都必须由：角色、时间、内容，这三部分组成。

其中，历史记录的索引由排序后的角色列表组成。

比如，我和小A的对话的索引就是：["__PLAYER__"，"A"]

每个索引唯一，这是必须注意的！

且索引为["__PLAYER__"，"A"]的对话，可以命中["__PLAYER__"，"A"，"B"]这个索引的对话，原因很简单，我、A、B三个人一起对话过后，我和A一定会记得我们和B一起谈话的内容，这是个基本逻辑问题。

所以历史记录服务还需要提供准确的搜索功能。

所以，它也是个会调用到数据安全访问模块的服务。

不过，它也会被提示词工厂调用，把某个历史记录插入到某个提示词里。

这个设计如何？说说你的看法。

=====

阅读docs文件夹下的3个主要md文档，根据实施文档，指导我一步步完成我的Mod。
你先阅读，准备好了之后我们就开始，从后一次更新的进度开始，每完成一步就做一次记录（Log附加在实施档最后）

注意，你不要提供具体代码，你可以提供样例，你要告诉我，我该怎么写，为什么这么写，需要注意什么，这部分在全景中有什么作用。