在Core项目的docs文件夹下，有一个TODO开头的文件，这个文件是我下一步的设计。你需要根据文件内容和里面的施工提示词进行施工，对旧有的、不合理的Tool相关设计和服务进行升级改造，清理无用的冗余的代码（仅限Tool部分）。

目前第一阶段需要你认真读取docs下的6个主要的md文档，说出你的实施计划，在我授权后你才可开工。

=====

别着急呀，事情还没办完呢！

下面，是历史记录服务。

所有的对话，都由历史记录服务所管理。

历史记录分为2种：1v1和NvN。

其中1v1可以是玩家对NPC，也可以是NPC对NPC。

NvN则是多对多。

这些历史记录都必须由：角色、时间、内容，这三部分组成。

其中，历史记录的索引由排序后的角色列表组成。

比如，我和小A的对话的索引就是：["__PLAYER__"，"A"]

每个索引唯一，这是必须注意的！

且索引为["__PLAYER__"，"A"]的对话，可以命中["__PLAYER__"，"A"，"B"]这个索引的对话，原因很简单，我、A、B三个人一起对话过后，我和A一定会记得我们和B一起谈话的内容，这是个基本逻辑问题。

所以历史记录服务还需要提供准确的搜索功能。

所以，它也是个会调用到数据安全访问模块的服务。

不过，它也会被提示词工厂调用，把某个历史记录插入到某个提示词里。

这个设计如何？说说你的看法。

=====

阅读docs文件夹下的3个主要md文档，根据实施文档，指导我一步步完成我的Mod。
你先阅读，准备好了之后我们就开始，从后一次更新的进度开始，每完成一步就做一次记录（Log附加在实施档最后）

注意，你不要直接生成代码文件，你可以提供详细过程，你要告诉我，我该怎么写，为什么这么写，需要注意什么，这部分在全景中有什么作用，你要考虑到我是个C#新手，纯新手，想系统地学习C#，并完成该项目。

=====

阅读Core项目下docs文件夹下的V3版架构文档、施工文档和模板文档。（必读）

必读文件列表如下：

ARCHITECTURE_V3_DIAGRAM.md
ARCHITECTURE_V3.md
V3_IMPLEMENTATION_PLAN.md

此外，Framework翻新，API更新，你一定要阅读：CN_v4.0_API调用指南.md

列出文件都要仔细阅读！

确保你了解我们正在推进的项目。

=====

你先阅读，准备好了之后我们就开始，从后一次更新的进度开始（重要）！

每完成一步就做一次记录（Log附加在实施档最后）。

注意，你不要直接生成代码文件，你可以提供详细过程，你要告诉我，我该怎么写，为什么这么写，需要注意什么，这部分在全景中有什么作用，你要考虑到我是个C#新手，纯新手，想系统地学习C#，并完成该项目。

再次叮嘱，你不要生成代码，代码我自己照着你的提示手码，但你需要给我讲解细节，把我当成一个C#纯新人。

=====

阅读CHECK_LIST.md

根据末尾的进度日志，写一个新的、全流程、全方位的审查ToDos，我看一下。

=====

阅读Core项目下docs\v4下的5个设计文件（必读），确保你知道我们目前在做什么。

阅读CN_v4.0_API调用指南.md，确保你知道如何调用已经写好的Framework（不可更改）。